% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/modele.R
\name{prepare_stan_data}
\alias{prepare_stan_data}
\title{Format Species-Level Data for Hierarchical Stan Model}
\usage{
prepare_stan_data(data.req, varname)
}
\arguments{
\item{data.req}{A data frame with species-level observations. Must include `speciesNb`, `complexNb`,
and count columns `<varname>.num` (successes) and `<varname>.den` (trials).}

\item{varname}{Character. Name of the target variable (e.g., `"HBI"`, `"endophagy"`). Used to identify numerator and denominator columns.}
}
\value{
A named list with components:
\describe{
  \item{`N_species_obs`}{Number of species-level observations (rows).}
  \item{`N_species`}{Number of unique species.}
  \item{`N_complexes`}{Number of unique complexes.}
  \item{`r_species`}{Vector of observed counts of successes per observation.}
  \item{`N_species_`}{Vector of total counts (trials) per observation.}
  \item{`species_id`}{Integer vector mapping each observation to a species ID.}
  \item{`species_complex`}{Integer vector mapping each species to a complex ID.}
}
}
\description{
Prepares species-level binomial data for a hierarchical Bayesian model in Stan.
Converts a dataset with species and complex identifiers and counts into a list formatted for Stan input.
The model infers complex-level effects from species-level observations.
}
